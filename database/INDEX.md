# INDEX

- 추가적인 쓰기 작업과 저장 공간을 활용하여 데이터베이스 테이블의 검색 속도를 향상시키기 위한 자료구조
- 데이터베이스 안의 레코드를 처음부터 풀스캔하지 않고, B+ 트리로 구성된 구조를 이용해서 검색 속도를 향상시킨다.
- 카디널리티가 높은 칼럼, 무엇에 대한 조회가 많이 일어나는지 파악하고 해당 데이터에 인덱스를 걸어야 한다.

## B+ TREE

1. 모든 KEY, DATA가 리프노드에만 저장된다.
2. 모든 리프노드가 연결 리스트의 형태를 띄고 있다. B트리 같은 경우에는 바로 옆에 있는 리프노드를 검사할 때 중위 탐색을 수행하게 되어서 성능이 저하되지만, B+트리는 리프노드끼리 선형 검사를 수행할 수 있어서 검색에 대한 효율이 좋다.

## 실행 계획

- all : 테이블 전체를 스캔
    - 데이터 전체의 개수가 많지 않거나 읽어야 할 데이터가 25% 이상
    
- range : 인덱스를 이용하여 범위를 검색 할 때

## 복합 인덱스

- 두 개 이상의 칼럼을 합쳐서 인덱스를 만듬
- 하나의 칼럼으로 인덱스를 만들었을 때 보다 더 적은 데이터 분포를 보인다.
- 결합 인덱스, 다중 컬럼 인덱스, composite index 라고도 함

## 커버링 인덱스

- 쿼리를 충족시키는데 필요한 모든 데이터를 갖고 있는 인덱스

```sql
SELECT * FROM USER WHERE id = 1;
SELECT id FROM USER WHERE id = 1;
```

- 위의 두 SQL 문에서 첫번째는 커버링 인덱스가 사용되지 않고 두번째 SQL 문에서는 커버링 인덱스가 사용된다.
- 인덱스를 사용해 조회하게 되면 실제 데이터까지 접근할 필요가 없습니다. 즉, 인덱스는 조회 성능을 향상 시킵니다.

## 인덱스 컨디션 푸시다운

- mysql이 인덱스를 사용하여 테이블에서 행을 검색하는 경우의 최적화
- ICP를 활성화하고 인덱스의 칼럼만 사용하여 where 조건의 일부를 평가할 수 있는 경우 mtysql 엔진은 where 조건 부분을 스토리지 엔진으로 푸시